# ============================================================
# Nginx config for portabletoiletschamp.com
# Add these rules inside your server {} block
# ============================================================

# --- www → non-www redirect (add as a separate server block) ---
server {
    listen 80;
    listen 443 ssl;
    server_name www.portabletoiletschamp.com;
    return 301 https://portabletoiletschamp.com$request_uri;
}

# --- Inside your main server block for portabletoiletschamp.com ---

    # Fix for static Next.js export (trailingSlash: false)
    # Allows /page-name to serve /page-name.html
    location / {
        try_files $uri $uri.html $uri/index.html =404;
    }

    # -------------------------------------------------------
    # 301 REDIRECTS: Root-level location pages → /location/
    # (These were old URLs before pages moved under /location/)
    # -------------------------------------------------------
    location = /portable-toilet-rental-services-in-los-angeles {
        return 301 /location/portable-toilet-rental-services-in-los-angeles;
    }
    location = /your-ultimate-guide-to-portable-toilet-rental-in-anaheim {
        return 301 /location/your-ultimate-guide-to-portable-toilet-rental-in-anaheim;
    }
    location = /exceptional-portable-toilet-rental-services-in-beverly-hills {
        return 301 /location/exceptional-portable-toilet-rental-services-in-beverly-hills;
    }
    location = /portable-toilet-rental-in-burbank-your-ultimate-guide {
        return 301 /location/portable-toilet-rental-in-burbank-your-ultimate-guide;
    }
    location = /portable-toilet-rental-solutions-in-malibu {
        return 301 /location/portable-toilet-rental-solutions-in-malibu;
    }
    location = /the-ultimate-guide-to-portable-toilet-rental-in-riverside {
        return 301 /location/the-ultimate-guide-to-portable-toilet-rental-in-riverside;
    }
    location = /portable-toilet-rental-solutions-in-torrance {
        return 301 /location/portable-toilet-rental-solutions-in-torrance;
    }
    location = /portable-toilet-services-in-fresno-your-comprehensive-guide {
        return 301 /location/portable-toilet-services-in-fresno-your-comprehensive-guide;
    }
    location = /premium-portable-toilet-services-in-glendale {
        return 301 /location/premium-portable-toilet-services-in-glendale;
    }
    location = /premium-portable-toilet-services-in-new-york {
        return 301 /location/premium-portable-toilet-services-in-new-york;
    }
    location = /portable-toilet-services-in-the-bronx-comprehensive-guide {
        return 301 /location/portable-toilet-services-in-the-bronx-comprehensive-guide;
    }
    location = /the-ultimate-guide-to-portable-toilet-services-in-brooklyn {
        return 301 /location/the-ultimate-guide-to-portable-toilet-services-in-brooklyn;
    }
    location = /your-comprehensive-guide-to-portable-toilet-service-in-jamaica {
        return 301 /location/your-comprehensive-guide-to-portable-toilet-service-in-jamaica;
    }
    location = /portable-toilet-service-in-miami-a-comprehensive-guide {
        return 301 /location/portable-toilet-service-in-miami-a-comprehensive-guide;
    }

    # -------------------------------------------------------
    # 301 REDIRECTS: Blog posts that no longer exist → /blog
    # -------------------------------------------------------
    location = /blog/ada-compliance-construction-sites {
        return 301 /blog;
    }
    location = /blog/event-accessibility-compliance-checklist {
        return 301 /blog;
    }

    # -------------------------------------------------------
    # 301 REDIRECTS: Landmark/POI pages → relevant location
    # -------------------------------------------------------
    location = /runyon-canyon-park {
        return 301 /location/portable-toilet-rental-services-in-los-angeles;
    }
    location = /los-angeles-county-museum-of-art {
        return 301 /location/portable-toilet-rental-services-in-los-angeles;
    }

    # -------------------------------------------------------
    # 301 REDIRECT: Author page → blog
    # -------------------------------------------------------
    location = /author/portable-toilets-champ-team {
        return 301 /blog;
    }
